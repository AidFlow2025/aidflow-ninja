<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Dashboard ‚Äî AidFlow Ninja</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<!-- PROTECCI√ìN -->
<script src="../js/auth.js"></script>
<script>
  protegerRuta();
</script>

<header class="admin-header">
  <div>
    <h1>ü•∑ Bienvenido, <span id="ninja-name"></span></h1>
    <p class="muted">Tu progreso dentro del Dojo</p>
  </div>

  <button class="btn secondary" onclick="logout()">Salir</button>
</header>

<main class="container admin-container">

  <!-- WALLET -->
  <section class="card">
    <h2>üí∞ Wallet Ninja</h2>
    <p class="big-money">$<span id="wallet-saldo">0.00</span></p>
  </section>

  <!-- ENTRADA AL DOJO -->
  <section class="card">
    <h2>ü•ã Acceso al Dojo</h2>

    <!-- DISCLAIMER -->
    <div class="card alert">
      <p>
        ‚ö†Ô∏è <strong>Aviso importante:</strong><br><br>
        AidFlow Ninja es una plataforma gamificada.
        Los aportes <strong>no constituyen inversi√≥n</strong>
        ni garantizan retornos.
      </p>

      <label class="terminos-check">
        <input type="checkbox" id="aceptaDisclaimer">
        Entiendo y acepto este aviso
      </label>
    </div>

    <button class="btn primary" onclick="pagarEntrada(10)">
      ü•∑ Entrar al Dojo ($10)
    </button>
  </section>

  <!-- REFERIDOS -->
  <section class="card">
    <h2>üë• Referidos</h2>
    <p>Total: <strong id="total-referidos">0</strong></p>

    <label>
      Tu link:
      <input type="text" id="link-referido" readonly>
    </label>

    <button class="btn secondary" onclick="copiarReferido()">
      Copiar link
    </button>
  </section>

</main>

<footer class="footer">
  <p>¬© 2025 AidFlow Ninja</p>
</footer>

<!-- SCRIPTS -->
<script src="../js/wallet.js"></script>
<script src="../js/economia.js"></script>
<script src="../js/main.js"></script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const user = localStorage.getItem("aidflow_user");

  document.getElementById("ninja-name").textContent = user;

  // wallet
  const saldo =
    Number(localStorage.getItem("aidflow_wallet_" + user)) || 0;
  document.getElementById("wallet-saldo").textContent =
    saldo.toFixed(2);

  // referidos
  const refs =
    Number(localStorage.getItem("aidflow_refs_" + user)) || 0;
  document.getElementById("total-referidos").textContent = refs;

  const link = `${location.origin}/register.html?ref=${user}`;
  document.getElementById("link-referido").value = link;
});
</script>

</body>
</html>
